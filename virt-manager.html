<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2026-02-08" />
  <title>virt-manager の使い方</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="github.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">virt-manager の使い方</h1>
<p class="date">2026-02-08</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#amd-v-が有効になっているか確認"
id="toc-amd-v-が有効になっているか確認">AMD-V
が有効になっているか確認</a></li>
<li><a href="#virt-manager-と-qemu-をインストール"
id="toc-virt-manager-と-qemu-をインストール">virt-manager と qemu
をインストール</a></li>
<li><a href="#ファイアウォールのバックエンドを変更"
id="toc-ファイアウォールのバックエンドを変更">ファイアウォールのバックエンドを変更</a></li>
<li><a href="#libvirtd-を実行" id="toc-libvirtd-を実行">libvirtd
を実行</a></li>
<li><a href="#virt-manager-を実行"
id="toc-virt-manager-を実行">virt-manager を実行</a></li>
<li><a href="#仮想マシンを削除"
id="toc-仮想マシンを削除">仮想マシンを削除</a></li>
</ul>
</nav>
<h2 id="amd-v-が有効になっているか確認">AMD-V
が有効になっているか確認</h2>
<pre><code>LC_ALL=C lscpu | grep Virtualization</code></pre>
<p>「Virtualization: AMD-V」と表示されればOK。</p>
<p>何も表示されないときは BIOS で AMD-V を有効にする。<br />
GIGABYTE 製マザーボードの場合は次のように行う。</p>
<ol type="1">
<li><p>「Tweaker」タブを選択</p></li>
<li><p>「Advanced CPU Settings」をクリック</p></li>
<li><p>「SVM Mode」を「Enabled」にする</p></li>
</ol>
<h2 id="virt-manager-と-qemu-をインストール">virt-manager と qemu
をインストール</h2>
<pre><code>yay -S --needed virt-manager qemu-full</code></pre>
<h2
id="ファイアウォールのバックエンドを変更">ファイアウォールのバックエンドを変更</h2>
<p>バックエンドを変更しないと<a
href="https://bbs.archlinux.org/viewtopic.php?id=296590">ネットに接続できなかった</a>。</p>
<pre><code>cp /etc/libvirt/network.conf network.conf

sed -i -e &#39;s,#firewall_backend\ =\ &quot;nftables&quot;,firewall_backend\ =\ &quot;iptables&quot;,g&#39; network.conf

sudo mv network.conf /etc/libvirt/network.conf

sudo systemctl start iptables

# システム起動時に実行する場合
sudo systemctl enable iptables</code></pre>
<h2 id="libvirtd-を実行">libvirtd を実行</h2>
<pre><code>sudo systemctl start libvirtd

# システム起動時に実行する場合
sudo systemctl enable libvirtd</code></pre>
<h2 id="virt-manager-を実行">virt-manager を実行</h2>
<pre><code>sudo virt-manager</code></pre>
<ol type="1">
<li><p>「ファイル」→「接続を追加」をクリック<br />
<img src="images/virt/virt_01.webp" /></p></li>
<li><p>ハイパーバイザーを選択<br />
「QEMU/KVM」を選択し、「接続」をクリック<br />
<img src="images/virt/virt_02.webp" /></p></li>
<li><p>新しい仮想マシンを作成<br />
メイン画面の「QEMU/KVM」を右クリックして「新規」を選択<br />
<img src="images/virt/virt_03.webp" /></p></li>
<li><p>OS のインストール方法を選択<br />
「ローカルのインストールメディア（ISO イメージまたは CD-ROM
ドライブ）」を選択。<br />
<img src="images/virt/virt_04.webp" /></p></li>
<li><p>ISO ファイルを指定<br />
<img src="images/virt/virt_05.webp" /></p></li>
<li><p>OS の選択欄に「何も検出されませんでした」と表示された場合<br />
「インストールメディアまたはソースから自動検出」のチェックを外す。<br />
検索ボックスに「generic」と入力し、「Generic Linux 2024」を選択。<br />
<img src="images/virt/virt_06.webp" /></p></li>
<li><p>メモリの使用量とCPUの個数を設定<br />
「このホストでは n MiB まで使用できます」「最大 n
個まで利用できます」と表示されているので、最大数の半分を指定。<br />
<img src="images/virt/virt_07.webp" /></p></li>
<li><p>仮想マシンのストレージを作成<br />
「カスタムストレージの選択または作成」にチェックをいれて「管理」をクリック。<br />
<img src="images/virt/virt_08.webp" /></p></li>
<li><p>左側の欄でホームディレクトリを選択し、「ボリューム」の右側にある「＋」をクリック<br />
<img src="images/virt/virt_09.webp" /></p></li>
<li><p>ストレージファイルの名前を設定<br />
ここでは「EndeavourOS」にする。<br />
<img src="images/virt/virt_10.webp" /></p></li>
<li><p>作成されたストレージファイルを選択<br />
<img src="images/virt/virt_11.webp" /></p></li>
<li><p>「次へ」をクリック<br />
<img src="images/virt/virt_12.webp" /></p></li>
<li><p>仮想マシンの名前を設定<br />
ここでは「EndeavourOS」にする。<br />
「完了」を押すと仮想マシンが起動する。<br />
<img src="images/virt/virt_13.webp" /></p></li>
<li><p>ブートローダー画面で OS を選択<br />
<img src="images/virt/virt_14.webp" /></p></li>
<li><p>仮想マシンをシャットダウン<br />
シャットダウンするときは左上の赤い電源ボタンをクリック。<br />
インストールせずにシャットダウンした場合は、ストレージが空なので次回電源ボタンを押しても何も起動しない。ISO
ファイルの選択からやり直す。<br />
<img src="images/virt/virt_15.webp" /></p></li>
</ol>
<h2 id="仮想マシンを削除">仮想マシンを削除</h2>
<p>virt-manager の「EndeavourOS」を右クリックして「削除」を選択。</p>
<p><a href="index.html">HOME</a></p>
</body>
</html>
